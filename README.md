# INS/GNSS 融合系统

车载 MEMS IMU + 双天线 GNSS 姿态测量离线处理系统

## 项目结构

```
GNSS_IMU_fusion_algorithm/
├── config/          # 配置文件管理
├── io/              # 数据读取与时间对齐
├── ins/             # 纯惯导解算
├── models/          # 状态定义、误差方程、IMU/GNSS模型
├── fusion/          # ESKF融合（松耦合&紧耦合）、约束
├── eval/            # 精度评估与绘图
├── runners/         # 实验主流程脚本
└── data/            # 数据存放目录
```

## 功能模块

- **纯INS惯导解算**：仅依靠IMU进行位置、速度、姿态积分
- **松耦合ESKF**：使用GNSS导航解修正INS
- **紧耦合ESKF**：使用GNSS原始观测（伪距、伪距率）进行融合
- **约束处理**：基线长度约束、零速约束等
- **遮挡实验**：模拟GNSS遮挡场景，评估系统鲁棒性
- **精度评估**：全面的误差分析和可视化

## 安装依赖

```bash
pip install -r requirements.txt
```

## 实现进度

- ✅ **第 0 步**：工程目录和模块骨架搭建
- ✅ **第 1 步**：配置与试验参数管理
- ✅ **第 2 步**：数据读取与时间对齐
- ✅ **第 3 步**：纯 INS 惯导解算（名义状态）
- ✅ **第 4 步**：误差状态 ESKF 模型建立（状态与误差方程）
  - 实现了误差动力学模型（F、G、Q 矩阵）
  - 实现了 ESKF 核心算法（预测、更新、修正）
  - 完成了完整的单元测试
  - 详见：[第四步实现说明.md](./第四步实现说明.md)
- ✅ **第 5 步**：松耦合 ESKF 实现（INS + GNSS 导航解）
  - 实现了松耦合量测模型（位置和速度观测）
  - 实现了完整的 GNSS 更新流程
  - 验证了融合效果
  - 详见：[第五步实现说明.md](./第五步实现说明.md)
- ⏳ **第 6 步**：紧耦合 ESKF 实现（待完成）
- ⏳ **第 7 步**：约束与遮挡控制（待完成）
- ⏳ **第 8 步**：精度评估与可视化（待完成）

## 使用方法

### 运行纯 INS 惯导解算
```bash
python runners/run_pure_ins.py
```

### 测试 ESKF 模型
```bash
python test/test_eskf.py
```

### 测试松耦合 ESKF
```bash
python test/test_loose_coupling.py
```

详见各模块说明和 `runners/` 目录下的实验脚本
